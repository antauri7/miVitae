
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset=utf-8>

<script type="text/javascript">
    window.google_analytics_uacct = "UA-7130344-6";
</script>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-7130344-6']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body>

            <script type="text/javascript"><!--
            google_ad_client = "pub-2955572330991421";
            /* 468x60, foot-post jafrancov.com */
            google_ad_slot = "6811043010";
            google_ad_width = 468;
            google_ad_height = 60;
            //-->
            </script>
            <script type="text/javascript"
            src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
            </script>
        </p>
                    <p class="aligncenter">Regresar a <strong><a href="http://jafrancov.com/2011/12/trazar-rutas-gmaps-api-v3/ ">Trazar rutas con GMaps API v3</a></strong></p>
                
    
                <article>
            <h1>Trazar rutas con GMaps API v3</h1>
            <p>Ejemplo de búsqueda y trazado de rutas con la API v3 de Google Maps</p>
                        <p>Para ver el ejemplo en funcionamiento, en las cajas de búsqueda, coloca una dirección, ciudad, estado, país, región o coordenadas geográficas, serán interpretadas y si existen ambos lugares y hay una ruta entre ellos, te dibujará la ruta entre ambos así como una guía paso a paso de cómo dirigirte.</p>
            
            <div>
            <label for="origen">Origen </label>
            <input type="text" name="origen" id="origen" size="50" placeholder="calle, ciudad, estado..." />
            </div>
            <div>
            <label for="destino">Destino</label>
            <input type="text" name="destino" id="destino" size="50" placeholder="calle, ciudad, estado..." />
            </div>
            <div>
            <input type="button" id="buscar" value="Buscar ruta"  />
            </div><br/><br/>
            <p>Opciones de ruta</p>
            <div id="rutaOps">
                <select id="modo_viaje" class="opciones_ruta">
                    <option value="DRIVING" selected="selected">Auto</option>
                    <option value="BICYCLING">Bicicleta</option>
                    <option value="WALKING">Caminando</option>
                </select>
                <select id="tipo_sistema" class="opciones_ruta">
                    <option value="METRIC" selected="selected">Métrico</option>
                    <option value="IMPERIAL">Imperial</option>
                </select>
            </div>
            <br />
            <div>
                <div id="map_canvas" style="float:left; width:60%; height:400px"></div>
                <div id="panel_ruta" style="float:right; overflow: auto; width:40%; height: 400px"></div>
            </div>
        </article>
        <br/>
                <br />
        <p style="text-align:center;">
            <script type="text/javascript"><!--
            google_ad_client = "pub-2955572330991421";
            /* 468x60, foot-post jafrancov.com */
            google_ad_slot = "6811043010";
            google_ad_width = 468;
            google_ad_height = 60;
            //-->
            </script>
            <script type="text/javascript"
            src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
            </script>
        </p>

        <p>Dudas, comentarios, enlaces, visita el espacio de <strong><a href="http:/jafrancov.com/demos/faq.php">preguntas frecuentes</a></strong>.</p>
                    <p class="aligncenter">Regresar a <strong><a href="http://jafrancov.com/2011/12/trazar-rutas-gmaps-api-v3/ ">Trazar rutas con GMaps API v3</a></strong></p>
            </div><!-- end content -->
    <aside class="col_5 col">
                <script type="text/javascript" src="http://www.google.com/jsapi"></script>
        <script type="text/javascript">
            google.load('search', '1');
            google.setOnLoadCallback(function() {
            google.search.CustomSearchControl.attachAutoCompletion(
              'partner-pub-2955572330991421:oxjkxetdubf',
              document.getElementById('q'),
              'cse-search-box');
            });
        </script>
        <form action=" http://jafrancov.com/search " id="cse-search-box">
            <fieldset><legend>&iquest;Buscabas algo?</legend>
                <input type="hidden" name="cx" value="partner-pub-2955572330991421:oxjkxetdubf" />
                <input type="hidden" name="cof" value="FORID:11" />
                <input type="hidden" name="ie" value="ISO-8859-1" />
                <input type="text" name="q" id="q" autocomplete="off" size="28" />
                <input type="submit" name="sa" value="Buscar" />
            </fieldset>
        </form>
        <script type="text/javascript" src="http://www.google.com.mx/cse/brand?form=cse-search-box&lang=es"></script>
        <!-- End search -->
        <br/>
                <div style="text-align:center;">
            <script type="text/javascript"><!--
                google_ad_client = "pub-2955572330991421";
                /* 250x250, jafrancov.com principal */
                google_ad_slot = "7050785232";
                google_ad_width = 250;
                google_ad_height = 250;
                //-->
            </script>
            <script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script>
        </div><!-- End Sponsors -->
        <br />
                <h3>Qu&eacute; pienso??</h3>
        <div style="padding-left: 15px;">
            <script src="http://widgets.twimg.com/j/2/widget.js"></script>
            <script>
                new TWTR.Widget({
                version: 2,
                type: 'profile',
                rpp: 6,
                interval: 6000,
                width: 260,
                height: 400,
                theme: {
                shell: {
                  background: '#282828',
                  color: '#ffffff'
                },
                tweets: {
                  background: '#A4282A',
                  color: '#dddddd',
                  links: '#E5C130'
                }
                },
                features: {
                scrollbar: true,
                loop: false,
                live: true,
                hashtags: true,
                timestamp: true,
                avatars: false,
                behavior: 'all'
                }
                }).render().setUser('jafrancov').start();
            </script>   
        </div><!-- End Twitter -->
    </aside><!-- End Sidebar -->
    <div class="clear" style="height:10px; border-bottom:1px solid #ccc;"></div></div><!-- end wrap -->
<footer class="footer_full">
    <section class="footer_row col_16">
    <div id="copyright">
            <p id="copyinfo">&copy; Alex Franco @<a href="http://twitter.com/jafrancov">jafrancov</a> 2010 | Powered by 52framework owned by <a href="http://enavu.com">enavu network</a> | Adapted by Alex Franco @<a href="http://twitter.com/jafrancov">jafrancov</a></p> 
    </div> <!-- end #copyright --> 
    <section>
</footer>

<script type="text/javascript" src="js/jquerymap.js"></script>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&language=es"></script>
<script type="text/javascript">
    var map;
    var directionsDisplay = new google.maps.DirectionsRenderer();
    var directionsService = new google.maps.DirectionsService();
    
    $(document).ready(function() {
        load_map();
    });
    
    function load_map() {
        var myLatlng = new google.maps.LatLng(20.68009, -101.35403);
        var myOptions = {
            zoom: 4,
            center: myLatlng,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map($("#map_canvas").get(0), myOptions);
    }
    
    function rockAndRoll(){
        var request = {
                origin: $('#origen').val(),
                destination: $('#destino').val(),
                travelMode: google.maps.DirectionsTravelMode[$('#modo_viaje').val()],
                unitSystem: google.maps.DirectionsUnitSystem[$('#tipo_sistema').val()],
                provideRouteAlternatives: true
        };
        directionsService.route(request, function(response, status) {
            if (status == google.maps.DirectionsStatus.OK) {
                directionsDisplay.setMap(map);
                directionsDisplay.setPanel($("#panel_ruta").get(0));
                directionsDisplay.setDirections(response);
            } else {
                alert("No existen rutas entre ambos puntos");
            }
        });
    }
    
    $('#buscar').live('click', function(){
        rockAndRoll();
    });

    $('.opciones_ruta').live('change', function(){
        rockAndRoll();
    });

</script>


</body>
</html>